<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Inventory Management System Design | Consistency & Reservations</title>
  <meta name="description"
    content="Architecting a high-throughput Inventory System: Handling race conditions, strict consistency vs eventual consistency, reservation patterns (Hold/Commit), and SKU management.">
  <meta name="keywords"
    content="system design, inventory system, stock management, strict consistency, event sourcing, reservation pattern, ACID transactions, warehousing">
  <meta name="author" content="Brijesh Patel">
  <link rel="canonical" href="https://brijesh.work/system-design/inventory-system/" />

  <!-- Styles -->
  <link rel="stylesheet" href="https://brijesh.work/pub/css/bootstrap.css">
  <link rel="stylesheet" href="https://brijesh.work/pub/css/style-main.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://brijesh.work/pub/js/global.js" crossorigin="anonymous"></script>

  <style>
    /* Shared System Design Theme */
    .hero-section {
      background: linear-gradient(135deg, #78350f 0%, #451a03 100%);
      /* Brown/Wood */
      color: white;
      padding: 4rem 0;
      margin-bottom: 2rem;
      border-bottom: 4px solid #d97706;
      /* Amber accent */
    }

    .hero-subtitle {
      color: #fcd34d;
      font-size: 1.25rem;
    }

    .sidebar-sticky {
      position: sticky;
      top: 2rem;
    }

    .sidebar-toc .nav-link {
      color: #64748b;
      padding: 0.25rem 0;
      font-size: 0.95rem;
    }

    .sidebar-toc .nav-link:hover,
    .sidebar-toc .nav-link.active {
      color: #78350f;
      font-weight: 500;
    }

    .content-section {
      margin-bottom: 3rem;
    }

    .tech-card {
      border: 1px solid #e2e8f0;
      border-radius: 0.5rem;
      padding: 1.5rem;
      height: 100%;
      background: #fffbeb;
      /* Light yellow/parchment */
      transition: transform 0.2s;
    }

    .tech-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .comparison-table th {
      background-color: #fff7ed;
    }

    .badge-soft {
      background-color: rgba(251, 191, 36, 0.1);
      color: #d97706;
      padding: 0.5em 0.8em;
    }

    .stock-flow {
      background: #ffffff;
      border: 2px dashed #d97706;
      border-radius: 0.5rem;
      padding: 2rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .flow-box {
      border: 2px solid #92400e;
      padding: 10px 15px;
      display: inline-block;
      margin: 10px;
      background: #fff;
      border-radius: 4px;
      font-weight: bold;
      color: #78350f;
    }

    .arrow {
      font-size: 1.5rem;
      color: #d97706;
      vertical-align: middle;
      margin: 0 10px;
    }

    @media (max-width: 991px) {
      .order-lg-1 {
        order: 2;
      }

      .order-lg-2 {
        order: 1;
      }
    }
  </style>
</head>

<body class="bg-white">

  <header loadhtml="https://brijesh.work/pub/inc/header.html" class="header border-bottom"></header>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <span
            class="badge badge-soft mb-3 rounded-pill bg-light bg-opacity-10 text-white border border-white border-opacity-25">Supply
            Chain & Logistics</span>
          <h1 class="display-4 fw-bold mb-3">Inventory Management System</h1>
          <p class="hero-subtitle mb-4">Designing for reality: Strict Consistency (ACID), Reservation patterns (Hold &
            Commit), and Multi-Warehouse logistics.</p>
          <div class="d-flex gap-3">
            <a href="#reservations" class="btn btn-light text-warning fw-bold"
              style="color: #92400e !important;">Reservation Flow</a>
            <a href="#data-model" class="btn btn-outline-light">Data Model</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="container pb-5">
    <div class="row">

      <!-- Main Content -->
      <main class="col-lg-9 order-lg-2">

        <!-- Architecture -->
        <section id="architecture" class="content-section">
          <h2>The "Overselling" Problem</h2>
          <p class="lead text-secondary">You have 1 item left. 100 users buy it. If you rely on <strong>Reading</strong>
            the stock before <strong>Writing</strong> it without locks, you will oversell.</p>

          <div class="alert alert-danger border-danger">
            <strong>Golden Rule:</strong> Inventory is the source of truth. It requires <strong>Strict
              Consistency</strong>. Do not use Eventual Consistency for specific stock counters (e.g., "Available to
            Promise").
          </div>
        </section>

        <!-- Reservation Flow -->
        <section id="reservations" class="content-section">
          <h2>The Reservation Pattern (Two-Phase)</h2>
          <p>Do not decrement stock immediately. Reserve it first.</p>
          <div class="stock-flow d-none d-md-block">
            <div class="flow-box">1. Add to Cart</div>
            <span class="arrow">‚Üí</span>
            <div class="flow-box bg-warning text-dark">2. Reserve Stock (TTL 15m)</div>
            <span class="arrow">‚Üí</span>
            <div class="flow-box">3. Payment Success</div>
            <span class="arrow">‚Üí</span>
            <div class="flow-box bg-success text-white">4. Confirm (Hard Deduced)</div>
          </div>
          <p class="mt-3 small text-muted"><em>If step 3 fails or times out, the reservation expires and stock returns
              to pool.</em></p>
        </section>

        <!-- Data Model -->
        <section id="data-model" class="content-section">
          <h2>Data Modeling: SQL vs NoSQL</h2>
          <p>For inventory, <strong>Row-level Locking</strong> is your friend.</p>

          <div class="row">
            <div class="col-md-6 mb-3">
              <div class="tech-card">
                <h5 class="fw-bold">üêò SQL (Postgres/MySQL)</h5>
                <p>Best for strict ACID compliance. Use `SELECT ... FOR UPDATE` or atomic updates.</p>
                <pre><code class="language-sql">UPDATE inventory 
SET 
  available = available - 1, 
  reserved = reserved + 1 
WHERE sku = 'A123' AND available > 0;
-- Returns Row Count: 1 (Success) or 0 (Oversold)</code></pre>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="tech-card">
                <h5 class="fw-bold">üçÉ NoSQL (DynamoDB/Redis)</h5>
                <p>Best for extreme scale. Use Conditional Writes or Compare-and-Swap.</p>
                <pre><code class="language-python"># DynamoDB Conditional Update
table.update_item(
    Key={'sku': 'A123'},
    UpdateExpression="SET available = available - :val",
    ConditionExpression="available >= :val",
    ExpressionAttributeValues={':val': 1}
)</code></pre>
              </div>
            </div>
          </div>
        </section>

        <!-- Warehousing -->
        <section id="warehousing" class="content-section">
          <h2>Warehousing Reality</h2>
          <p>Inventory is physical. You need to model <strong>Locations</strong> (bins, shelves) and
            <strong>SKUs</strong>.</p>

          <table class="table table-bordered comparison-table">
            <tr>
              <th style="width: 30%">Entity</th>
              <th>Description</th>
            </tr>
            <tr>
              <td><strong>SKU (Stock Keeping Unit)</strong></td>
              <td>Unique identifier for a sellable product variant (e.g., T-Shirt Red Size M).</td>
            </tr>
            <tr>
              <td><strong>Bin Location</strong></td>
              <td>Physical spot in a warehouse (e.g., Aisle 4, Shelf B, Bin 12).</td>
            </tr>
            <tr>
              <td><strong>ATP (Available to Promise)</strong></td>
              <td>Virtual count showing what you can sell online (`Total On Hand - Reserved - Damaged`).</td>
            </tr>
          </table>
        </section>

        <section class="content-section border-top pt-5">
          <h2>Summary</h2>
          <ul>
            <li><strong>Consistency:</strong> Never compromise. Use Database constraints to prevent negative stock.</li>
            <li><strong>Reservations:</strong> Temporarily hold stock during checkout to improve UX and accuracy.</li>
            <li><strong>Reconciliation:</strong> Always have a background job to fix "drift" between physical counts and
              digital records.</li>
          </ul>
        </section>

      </main>

      <!-- Sidebar -->
      <aside class="col-lg-3 order-lg-1 mb-4">
        <div class="sidebar-sticky">
          <h6 class="fw-bold text-uppercase text-secondary mb-3 small tracking-wide">On this page</h6>
          <nav class="nav flex-column sidebar-toc">
            <a class="nav-link" href="#architecture">Strict Consistency</a>
            <a class="nav-link" href="#reservations">Reservation Pattern</a>
            <a class="nav-link" href="#data-model">Data Model (SQL/NoSQL)</a>
            <a class="nav-link" href="#warehousing">Warehousing & SKUs</a>
          </nav>

          <hr class="my-4">
          <h6 class="fw-bold text-secondary mb-3 small">Related Topics</h6>
          <ul class="list-unstyled small">
            <li class="mb-2"><a href="../booking-management/" class="text-decoration-none text-muted">Booking System</a>
            </li>
            <li class="mb-2"><a href="../order-payment/" class="text-decoration-none text-muted">Order System</a></li>
            <li class="mb-2"><a href="../database-sharding/" class="text-decoration-none text-muted">Database
                Sharding</a></li>
          </ul>
        </div>
      </aside>

    </div>
  </div>

  <footer loadhtml="https://brijesh.work/pub/inc/footer.html"></footer>
  <script src="https://brijesh.work/pub/js/footer.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script>includeHTML();</script>
</body>

</html>