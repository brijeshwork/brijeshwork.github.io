<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>API Gateway vs Service Mesh | Sidecars, mTLS, and Traffic Splitting</title>
  <meta name="description"
    content="Detailed comparison of API Gateway (North-South) vs Service Mesh (East-West). Covers Sidecar patterns with Envoy/Istio, mTLS security, observability, and traffic splitting configurations.">
  <meta name="keywords"
    content="system design, api gateway, service mesh, istio, envoy, sidecar pattern, microservices, mtls, traffic splitting, kubernetes">
  <meta name="author" content="Brijesh Patel">
  <link rel="canonical" href="https://brijesh.work/system-design/api-gateway-service-mesh/" />

  <!-- Styles -->
  <link rel="stylesheet" href="https://brijesh.work/pub/css/bootstrap.css">
  <link rel="stylesheet" href="https://brijesh.work/pub/css/style-main.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://brijesh.work/pub/js/global.js" crossorigin="anonymous"></script>

  <style>
    /* Shared System Design Theme */
    .hero-section {
      background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
      color: white;
      padding: 4rem 0;
      margin-bottom: 2rem;
    }

    .hero-subtitle {
      color: #fcd34d;
      font-size: 1.25rem;
    }

    .sidebar-sticky {
      position: sticky;
      top: 2rem;
    }

    .sidebar-toc .nav-link {
      color: #64748b;
      padding: 0.25rem 0;
      font-size: 0.95rem;
    }

    .sidebar-toc .nav-link:hover,
    .sidebar-toc .nav-link.active {
      color: #b45309;
      font-weight: 500;
    }

    .content-section {
      margin-bottom: 3rem;
    }

    .tech-card {
      border: 1px solid #e2e8f0;
      border-radius: 0.5rem;
      padding: 1.5rem;
      height: 100%;
      background: #f8fafc;
      transition: transform 0.2s;
    }

    .tech-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .comparison-table th {
      background-color: #fffbeb;
    }

    .badge-soft {
      background-color: rgba(217, 119, 6, 0.1);
      color: #b45309;
      padding: 0.5em 0.8em;
    }

    .mesh-diagram {
      background: #ffffff;
      border: 2px dashed #fbbf24;
      border-radius: 0.5rem;
      padding: 2rem;
      text-align: center;
      margin-bottom: 1.5rem;
      font-family: monospace;
    }

    .pod-box {
      border: 2px solid #94a3b8;
      padding: 15px;
      display: inline-block;
      margin: 10px;
      background: #fff;
      border-radius: 8px;
      position: relative;
      text-align: left;
    }

    .sidecar {
      background: #fcd34d;
      border: 1px solid #d97706;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.85rem;
      display: inline-block;
      margin-right: 10px;
    }

    .app-container {
      background: #e2e8f0;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.85rem;
      display: inline-block;
    }

    @media (max-width: 991px) {
      .order-lg-1 {
        order: 2;
      }

      .order-lg-2 {
        order: 1;
      }
    }
  </style>
</head>

<body class="bg-white">

  <header loadhtml="https://brijesh.work/pub/inc/header.html" class="header border-bottom"></header>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <span
            class="badge badge-soft mb-3 rounded-pill bg-light bg-opacity-25 text-white border border-white border-opacity-25">Microservices
            Patterns</span>
          <h1 class="display-4 fw-bold mb-3">API Gateway vs Service Mesh</h1>
          <p class="hero-subtitle mb-4">Navigating the connectivity maze: Understanding North-South vs East-West
            traffic, the Sidecar pattern, and when you truly need Istio.</p>
          <div class="d-flex gap-3">
            <a href="#comparison" class="btn btn-light text-warning fw-bold"
              style="color: #b45309 !important;">Comparison</a>
            <a href="#sidecar" class="btn btn-outline-light">Sidecar Pattern</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="container pb-5">
    <div class="row">

      <!-- Main Content -->
      <main class="col-lg-9 order-lg-2">

        <!-- Concepts -->
        <section id="concepts" class="content-section">
          <h2>The Core Distinction</h2>
          <p class="lead text-secondary">A common source of confusion. Both route traffic, but they serve different
            domains.</p>

          <div class="row mt-4">
            <div class="col-md-6 mb-3">
              <div class="tech-card border-top border-4 border-warning">
                <h5 class="fw-bold mb-3">üåê API Gateway (North-South)</h5>
                <p><strong>Entry Point:</strong> Handles traffic entering the cluster from the outside world
                  (Mobile/Web).</p>
                <ul class="small text-muted">
                  <li>Authentication (OAuth/JWT)</li>
                  <li>Rate Limiting (Per Client)</li>
                  <li>Response Aggregation</li>
                  <li>SSL Termination</li>
                </ul>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="tech-card border-top border-4 border-info">
                <h5 class="fw-bold mb-3">üï∏Ô∏è Service Mesh (East-West)</h5>
                <p><strong>Inter-Service:</strong> Handles traffic <i>inside</i> the cluster between microservices.</p>
                <ul class="small text-muted">
                  <li>Mutual TLS (mTLS) Security</li>
                  <li>Service Discovery</li>
                  <li>Retries & Circuit Breaking</li>
                  <li>Observability (Tracing)</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- Sidecar Pattern -->
        <section id="sidecar" class="content-section">
          <h2>The Sidecar Pattern</h2>
          <p>How does a Service Mesh intercept traffic without changing code? By injecting a <strong>Sidecar
              Proxy</strong> (e.g., Envoy) into every Pod.</p>

          <div class="mesh-diagram d-none d-md-block">
            <div class="pod-box">
              <strong>Pod A (Checkout)</strong><br>
              <div class="mt-2">
                <span class="sidecar">Envoy Proxy</span> ‚Üî <span class="app-container">App Container</span>
              </div>
            </div>
            <span style="font-size: 2rem; vertical-align: middle;">‚û° mTLS ‚û°</span>
            <div class="pod-box">
              <strong>Pod B (Payment)</strong><br>
              <div class="mt-2">
                <span class="app-container">App Container</span> ‚Üî <span class="sidecar">Envoy Proxy</span>
              </div>
            </div>
            <p class="text-muted small mt-3">Application code talks to `localhost`. Envoy handles the network magic.</p>
          </div>
        </section>

        <!-- Configuration -->
        <section id="config" class="content-section">
          <h2>Traffic Control (Istio Example)</h2>
          <p>Service Meshes allow advanced routing rules like <strong>Canary Deployments</strong> (shift 10% traffic to
            v2).</p>

          <h5 class="mt-4">1. VirtualService (Routing Logic)</h5>
          <pre><code class="language-yaml">apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: payment-service
spec:
  hosts:
  - payment
  http:
  - route:
    - destination:
        host: payment
        subset: v1
      weight: 90
    - destination:
        host: payment
        subset: v2
      weight: 10  # 10% traffic to Canary</code></pre>

          <h5 class="mt-4">2. DestinationRule (Subsets)</h5>
          <pre><code class="language-yaml">apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: payment-service
spec:
  host: payment
  subsets:
  - name: v1
    labels:
      version: v1
  - name: v2
    labels:
      version: v2</code></pre>
        </section>

        <!-- Comparison Table -->
        <section id="comparison" class="content-section">
          <h2>When to use what?</h2>
          <table class="table table-bordered comparison-table">
            <thead>
              <tr>
                <th>Requirement</th>
                <th>API Gateway</th>
                <th>Service Mesh</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Hiding Internal APIs</strong></td>
                <td>‚úÖ Yes (Facade Pattern)</td>
                <td>‚ùå No</td>
              </tr>
              <tr>
                <td><strong>Zero-Trust Security (mTLS)</strong></td>
                <td>‚ùå No (Usually terminates SSL)</td>
                <td>‚úÖ Yes (Auto-rotates certs)</td>
              </tr>
              <tr>
                <td><strong>Protocol Translation</strong></td>
                <td>‚úÖ Yes (REST -> gRPC)</td>
                <td>‚ùå No (Primarily Transport)</td>
              </tr>
              <tr>
                <td><strong>Observability</strong></td>
                <td>Edge Metrics only</td>
                <td>Deep End-to-End Tracing</td>
              </tr>
            </tbody>
          </table>

          <div class="alert alert-danger border border-danger mt-3">
            <strong>‚ö†Ô∏è Complexity Warning:</strong> Don't adopt a Service Mesh (Istio/Linkerd) unless you have 50+
            microservices or strict compliance (mTLS) needs. The operational overhead is massive.
          </div>
        </section>

        <section class="content-section border-top pt-5">
          <h2>Summary</h2>
          <ul>
            <li><strong>API Gateway:</strong> The "Front Door". Focuses on Client-to-Cluster security and routing.</li>
            <li><strong>Service Mesh:</strong> The "Internal Nervous System". Focuses on Service-to-Service reliability
              and security.</li>
            <li><strong>Sidecar Pattern:</strong> Decouples network logic from application code.</li>
            <li><strong>Start Simple:</strong> Most smaller architectures only need an API Gateway + Standard K8s
              networking.</li>
          </ul>
        </section>

      </main>

      <!-- Sidebar -->
      <aside class="col-lg-3 order-lg-1 mb-4">
        <div class="sidebar-sticky">
          <h6 class="fw-bold text-uppercase text-secondary mb-3 small tracking-wide">On this page</h6>
          <nav class="nav flex-column sidebar-toc">
            <a class="nav-link" href="#concepts">Core Distinction</a>
            <a class="nav-link" href="#sidecar">Sidecar Pattern</a>
            <a class="nav-link" href="#config">Traffic Control (YAML)</a>
            <a class="nav-link" href="#comparison">When to Use</a>
          </nav>

          <hr class="my-4">
          <h6 class="fw-bold text-secondary mb-3 small">Related Topics</h6>
          <ul class="list-unstyled small">
            <li class="mb-2"><a href="../secure-api-gateway/" class="text-decoration-none text-muted">Secure API
                Gateway</a></li>
            <li class="mb-2"><a href="../microservices-vs-monolith/"
                class="text-decoration-none text-muted">Microservices</a></li>
            <li class="mb-2"><a href="../fault-tolerant-patterns/" class="text-decoration-none text-muted">Fault
                Tolerance</a></li>
          </ul>
        </div>
      </aside>

    </div>
  </div>

  <footer loadhtml="https://brijesh.work/pub/inc/footer.html"></footer>
  <script src="https://brijesh.work/pub/js/footer.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
  <script>includeHTML();</script>
</body>

</html>