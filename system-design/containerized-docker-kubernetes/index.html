<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Designing a Containerized System with Docker & Kubernetes — System Design | Brijesh Patel</title>
<meta name="description" content="Containerization and Kubernetes system design: images, deployments, operators, networking and scaling patterns for production systems.">
<link rel="canonical" href="https://brijesh.work/system-design/containerized-docker-kubernetes/" />
<link rel="stylesheet" href="https://brijesh.work/pub/css/bootstrap.css">
<link rel="stylesheet" href="https://brijesh.work/pub/css/style-main.css">
<script src="https://brijesh.work/pub/js/global.js" crossorigin="anonymous"></script>
</head>
<body>
<header loadhtml="https://brijesh.work/pub/inc/header.html" class="header"></header>

<section>
  <div class="container">
    <div class="row">
      <div class="col-12 col-lg-8">
        <h1>Designing a Containerized System with Docker &amp; Kubernetes</h1>
        <p class="lead">Best practices for building and running containerized applications at scale using Docker and Kubernetes.</p>

        <h2 id="why-containers">Why containers?</h2>
        <p>Containers provide environment consistency, fast startup and resource isolation. Kubernetes adds orchestration for scheduling, scaling and rolling updates.</p>

        <!-- Architecture diagram -->
        <div class="mb-4">
          <svg width="100%" height="170" viewBox="0 0 900 170" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Containers and Kubernetes architecture">
            <defs>
              <style>.n{fill:#f8f9fa;stroke:#adb5bd;stroke-width:1}.t{font-size:12px;fill:#212529}</style>
            </defs>
            <rect x="20" y="20" width="240" height="120" class="n" rx="6"/>
            <text x="140" y="50" text-anchor="middle" class="t">Developer Workflow</text>
            <text x="140" y="70" text-anchor="middle" class="t">Git → CI → Image</text>

            <rect x="300" y="15" width="260" height="140" class="n" rx="6"/>
            <text x="430" y="45" text-anchor="middle" class="t">Kubernetes Cluster</text>
            <text x="430" y="68" text-anchor="middle" class="t">Nodes → Kubelet → kube-proxy</text>
            <text x="430" y="88" text-anchor="middle" class="t">Pods (containers), Services, Ingress</text>

            <rect x="590" y="20" width="260" height="120" class="n" rx="6"/>
            <text x="720" y="50" text-anchor="middle" class="t">Observability & Ops</text>
            <text x="720" y="70" text-anchor="middle" class="t">Prometheus, Grafana, ELK</text>

            <path d="M260 80 L300 80" stroke="#495057" stroke-width="2" marker-end="url(#a)"/>
            <defs><marker id="a" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0,10 3.5,0 7" fill="#495057"/></marker></defs>
          </svg>
          <p class="small text-muted">Figure: Developer pushes code → CI builds image → Kubernetes runs pods and provides scaling, networking and observability.</p>
        </div>

        <h3 id="examples">Examples & samples</h3>

        <h4 id="dockerfile">Sample Dockerfile (multi-stage)</h4>
        <pre><code class="language-dockerfile"># Build stage
FROM node:18-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

# Production stage
FROM node:18-alpine
WORKDIR /app
COPY --from=build /app/dist ./dist
COPY package*.json ./
RUN npm ci --only=production
CMD ["node", "dist/index.js"]
</code></pre>

        <h4 id="k8s-manifests">Kubernetes manifests (Deployment + Service)</h4>
        <p>Minimal deployment and ClusterIP service example.</p>
        <pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
      - name: my-app
        image: ghcr.io/ORG/APP:v1
        ports:
        - containerPort: 3000
        resources:
          requests:
            cpu: "100m"
            memory: "128Mi"
          limits:
            cpu: "500m"
            memory: "512Mi"

---
apiVersion: v1
kind: Service
metadata:
  name: my-app-svc
spec:
  selector:
    app: my-app
  ports:
  - port: 80
    targetPort: 3000
  type: ClusterIP
</code></pre>

        <h4 id="hpa">Horizontal Pod Autoscaler (HPA) example</h4>
        <pre><code class="language-yaml">apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: my-app-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: my-app
  minReplicas: 2
  maxReplicas: 20
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 60
</code></pre>

        <h4 id="notes">Notes & tips</h4>
        <ul>
          <li>Prefer small, single-purpose containers and let K8s compose them.</li>
          <li>Set resource requests/limits to allow the scheduler to bin-pack nodes efficiently.</li>
          <li>Use liveness/readiness probes to avoid routing traffic to unhealthy pods.</li>
          <li>Consider using a service mesh for gradual traffic shifting and observability.</li>
        </ul>

        <!-- Prism.js for syntax highlighting -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism.min.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/autoloader/prism-autoloader.min.js"></script>

        <h3 id="core-components">Core components</h3>
        <ul>
          <li>Container images and registries</li>
          <li>Deployment controllers, replicasets</li>
          <li>ConfigMaps, Secrets, and volume management</li>
          <li>Service discovery, ingress and service meshes</li>
        </ul>

        <h3 id="scaling-ops">Scaling & ops considerations</h3>
        <ul>
          <li>Horizontal Pod Autoscaler & custom metrics</li>
          <li>Node autoscaling and bin-packing</li>
          <li>Resource requests/limits and QoS classes</li>
          <li>CI/CD integration for image promotion</li>
        </ul>

        <h2 id="conclusion">Conclusion</h2>
        <p>Adopt immutable images, automate deployments, and design for observability and resilience when running containerized workloads in production.</p>
      </div>

      <aside class="col-12 col-lg-4">
        <div class="card mb-4"><div class="card-body"><h5>Quick links</h5><ul class="list-unstyled"><li><a href="#why-containers">Why containers?</a></li><li><a href="#core-components">Core components</a></li></ul></div></div>
      </aside>
    </div>
  </div>
</section>

<footer loadhtml="https://brijesh.work/pub/inc/footer.html"></footer>
<script src="https://brijesh.work/pub/js/footer.js" crossorigin="anonymous"></script>
<script>includeHTML();</script>
</body>
</html>
